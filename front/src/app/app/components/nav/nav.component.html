<div *ngIf="($type | async) == 'default';else characterTemplate" class="bg-black h-[70px]">
    <div class="mx-auto flex h-full w-full lg:max-w-[600px]" [ngClass]="'[&>*]:1/' + (($user | async)?.isAdmin ? '4' : '3')">
        <a [routerLink]="(onList | async) ? '/' : '/personnages'" [class.active]="onList | async"
           class="flex h-full w-1/3 items-center group hover:bg-white/5">
            <svg class="m-auto fill-light w-[20px] h-[20px] group-hover:fill-white group-[.active]:fill-yellow"
                 width="20"
                 height="20"
                 viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M7 2H2L2 7H7V2ZM9 18V13C9 11.8954 8.10457 11 7 11H2C0.895431 11 0 11.8954 0 13V18C0 19.1046 0.89543 20 2 20H7C8.10457 20 9 19.1046 9 18ZM9 7V2C9 0.895431 8.10457 0 7 0H2C0.895431 0 0 0.89543 0 2V7C0 8.10457 0.89543 9 2 9H7C8.10457 9 9 8.10457 9 7ZM7 13H2L2 18H7V13ZM18 2H13V7H18V2ZM18 13H13V18H18V13ZM11 2C11 0.89543 11.8954 0 13 0H18C19.1046 0 20 0.895431 20 2V7C20 8.10457 19.1046 9 18 9H13C11.8954 9 11 8.10457 11 7V2ZM13 11C11.8954 11 11 11.8954 11 13V18C11 19.1046 11.8954 20 13 20H18C19.1046 20 20 19.1046 20 18V13C20 11.8954 19.1046 11 18 11H13Z"/>
            </svg>
        </a>
        <a [routerLink]="(onCreate | async) ? '/' : '/personnages/creation'" [class.active]="onCreate | async" routerLinkActive="active"
           class="flex h-full w-1/3 items-center group hover:bg-white/5">
            <svg class="m-auto fill-light w-[20px] h-[20px] group-hover:fill-white group-[.active]:fill-yellow"
                 width="20"
                 height="20"
                 viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M11 0H9V9H0V11H9V20H11V11H20V9H11V0Z"/>
            </svg>
        </a>
        <a [routerLink]="(onAccount | async) ? '/' : '/compte'" [class.active]="onAccount | async" routerLinkActive="active"
           class="flex h-full w-1/3 items-center group hover:bg-white/5">
            <div class="m-auto overflow-hidden w-[25px] h-[25px]">
                <div *ngIf="(auth.userObservableOnceLoaded() | async) as user">
                    <img *ngIf="user?.profileImage"
                         class="h-[25px] w-[25px] rounded-3xl group-hover:border-white group-[.active]:border-yellow group-[.active]:border-2"
                         [ngSrc]="user?.profileImage!"
                         alt="Photo de profile"
                         width="25" height="25">
                    <svg *ngIf="!user?.profileImage"
                         class="fill-light-gray group-hover:fill-white group-[.active]:fill-yellow"
                         width="25"
                         height="25"
                         viewBox="0 0 27 27"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                              clip-rule="evenodd"
                              d="M13.5 0C12.5997 0 11.719 0.0882726 10.8664 0.256938C10.3246 0.364119 9.97231 0.89021 10.0795 1.43199C10.1867 1.97378 10.7128 2.32609 11.2545 2.21891C11.98 2.0754 12.7307 2 13.5 2C14.2693 2 15.02 2.0754 15.7455 2.21891C16.2872 2.3261 16.8133 1.97378 16.9205 1.432C17.0277 0.89021 16.6754 0.364119 16.1336 0.256938C15.281 0.0882728 14.4003 0 13.5 0ZM7.11112 3.9364C7.57006 3.62915 7.69302 3.00804 7.38577 2.54911C7.07853 2.09018 6.45742 1.96722 5.99849 2.27446C4.52672 3.25978 3.25978 4.52672 2.27446 5.99848C1.96722 6.45742 2.09018 7.07853 2.54911 7.38577C3.00804 7.69302 3.62915 7.57005 3.9364 7.11112C4.77628 5.8566 5.8566 4.77628 7.11112 3.9364ZM21.0015 2.27446C20.5426 1.96722 19.9215 2.09018 19.6142 2.54911C19.307 3.00804 19.4299 3.62915 19.8889 3.9364C21.1434 4.77628 22.2237 5.8566 23.0636 7.11112C23.3708 7.57006 23.992 7.69302 24.4509 7.38577C24.9098 7.07853 25.0328 6.45742 24.7255 5.99849C23.7402 4.52672 22.4733 3.25978 21.0015 2.27446ZM2.21891 11.2545C2.3261 10.7128 1.97378 10.1867 1.432 10.0795C0.89021 9.9723 0.364119 10.3246 0.256938 10.8664C0.0882728 11.719 0 12.5997 0 13.5C0 14.4003 0.0882726 15.281 0.256938 16.1336C0.364119 16.6754 0.89021 17.0277 1.43199 16.9205C1.97378 16.8133 2.32609 16.2872 2.21891 15.7455C2.0754 15.02 2 14.2693 2 13.5C2 12.7307 2.0754 11.98 2.21891 11.2545ZM26.7431 10.8664C26.6359 10.3246 26.1098 9.97231 25.568 10.0795C25.0262 10.1867 24.6739 10.7128 24.7811 11.2545C24.9246 11.98 25 12.7307 25 13.5C25 14.2693 24.9246 15.02 24.7811 15.7455C24.6739 16.2872 25.0262 16.8133 25.568 16.9205C26.1098 17.0277 26.6359 16.6754 26.7431 16.1336C26.9117 15.281 27 14.4003 27 13.5C27 12.5997 26.9117 11.719 26.7431 10.8664ZM3.9364 19.8889C3.62915 19.4299 3.00804 19.307 2.54911 19.6142C2.09018 19.9215 1.96722 20.5426 2.27446 21.0015C3.25978 22.4733 4.52672 23.7402 5.99848 24.7255C6.45742 25.0328 7.07853 24.9098 7.38577 24.4509C7.69302 23.992 7.57005 23.3708 7.11112 23.0636C5.8566 22.2237 4.77628 21.1434 3.9364 19.8889ZM24.7255 21.0015C25.0328 20.5426 24.9098 19.9215 24.4509 19.6142C23.992 19.307 23.3708 19.4299 23.0636 19.8889C22.2237 21.1434 21.1434 22.2237 19.8889 23.0636C19.4299 23.3708 19.307 23.992 19.6142 24.4509C19.9215 24.9098 20.5426 25.0328 21.0015 24.7255C22.4733 23.7402 23.7402 22.4733 24.7255 21.0015ZM11.2545 24.7811C10.7128 24.6739 10.1867 25.0262 10.0795 25.568C9.9723 26.1098 10.3246 26.6359 10.8664 26.7431C11.719 26.9117 12.5997 27 13.5 27C14.4003 27 15.281 26.9117 16.1336 26.7431C16.6754 26.6359 17.0277 26.1098 16.9205 25.568C16.8133 25.0262 16.2872 24.6739 15.7455 24.7811C15.02 24.9246 14.2693 25 13.5 25C12.7307 25 11.98 24.9246 11.2545 24.7811ZM10.4211 12.2C10.4211 12.68 10.7368 13 11.2105 13C11.6842 13 12 12.6 12 12.2C12 10.44 10.6579 9 9 9C7.34211 9 6 10.44 6 12.2C6 12.68 6.31579 13 6.78947 13C7.26316 13 7.57895 12.68 7.57895 12.2C7.57895 11.32 8.21053 10.6 9 10.6C9.78947 10.6 10.4211 11.32 10.4211 12.2ZM20.2105 13C19.7368 13 19.4211 12.68 19.4211 12.2C19.4211 11.32 18.7895 10.6 18 10.6C17.2105 10.6 16.5789 11.32 16.5789 12.2C16.5789 12.68 16.2632 13 15.7895 13C15.3158 13 15 12.68 15 12.2C15 10.44 16.3421 9 18 9C19.6579 9 21 10.44 21 12.2C21 12.6 20.6842 13 20.2105 13ZM16.9876 17.0833C17.0685 16.5 16.7451 16 16.2601 16H10.7637C10.2787 16 9.87454 16.5833 10.0362 17.0833C10.4404 18.75 11.8145 20 13.5119 20C15.2094 20 16.5835 18.75 16.9876 17.0833Z"/>
                    </svg>
                </div>
            </div>
        </a>
        <a [routerLink]="(onAdmin | async) ? '/' : '/admin'" *ngIf="($user | async)?.isAdmin" [class.active]="onAdmin | async"
           routerLinkActive="active" class="flex h-full w-1/3 items-center group hover:bg-white/5">
            <svg class="m-auto fill-light w-[20px] h-[20px] group-hover:fill-white group-[.active]:fill-yellow"
                 xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 25 26">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.4117 0.450505C10.9339 0.154922 11.5246 0 12.125 0C12.7254 0 13.3161 0.154922 13.8383 0.450505L13.8404 0.451696L22.3921 5.25051L22.396 5.25267C22.9183 5.54881 23.3544 5.9759 23.6587 6.4929C23.9631 7.01003 24.1244 7.59811 24.125 8.19797V8.19901V17.801V17.802C24.1244 18.4019 23.9631 18.99 23.6587 19.5071C23.3544 20.0241 22.9183 20.4512 22.396 20.7473L22.3921 20.7495L13.8404 25.5483L13.8385 25.5494C13.3162 25.8451 12.7254 26 12.125 26C11.5246 26 10.9338 25.8451 10.4115 25.5494L10.4096 25.5483L1.85785 20.7495L1.85401 20.7473C1.33171 20.4512 0.895642 20.0241 0.59133 19.5071C0.286935 18.99 0.125627 18.4019 0.125 17.802V17.801V8.19901V8.19797C0.125627 7.59811 0.286935 7.01003 0.59133 6.4929C0.895642 5.9759 1.33171 5.54881 1.85401 5.25268L1.85785 5.2505L1.85785 5.25051L10.4096 0.451696L10.4117 0.450505ZM13.125 23.6564L21.4096 19.0075L21.4112 19.0066C21.6306 18.8818 21.8107 18.7039 21.9351 18.4926C22.0597 18.2808 22.1247 18.042 22.125 17.7999V8.20006C22.125 8.18885 22.1248 8.17765 22.1245 8.16646L13.125 13.5662V23.6564ZM11.125 13.5662V23.6564L2.84043 19.0075L2.83881 19.0066C2.61938 18.8818 2.43934 18.704 2.31491 18.4926C2.19033 18.2809 2.12533 18.0423 2.125 17.8004V8.19962C2.12502 8.18856 2.12517 8.1775 2.12545 8.16646L11.125 13.5662ZM12.125 2C11.868 2 11.6165 2.0665 11.396 2.19151L11.3922 2.19369L11.3921 2.19368L3.46863 6.63999L12.125 11.8338L20.7814 6.63999L12.8579 2.19368L12.854 2.19152L12.854 2.19151C12.6335 2.0665 12.382 2 12.125 2Z"/>
            </svg>
        </a>
    </div>
</div>
<ng-template #characterTemplate>
    <div *ngIf="($character | async) as character">
        <div class="w-full bg-black px-[15px]">
            <div class="flex flex-row justify-between pt-[20px] pb-[15px] mx-auto container h-[70px] items-center">
                <a class="flex flex-row items-center text-16 hover:underline"
                   [routerLink]="($type | async) === 'characterWithNav' ? '/personnages' : '/personnages/' + character._id">
                    <svg class="me-[10px]" xmlns="http://www.w3.org/2000/svg" width="20" height="12" viewBox="0 0 20 12" fill="none">
                        <path d="M18.8945 5H3.41709L6.73367 1.7C7.13568 1.3 7.13568 0.7 6.73367 0.3C6.33166 -0.1 5.72864 -0.1 5.32663 0.3L0.301508 5.3C0.201005 5.4 0.201005 5.5 0.100502 5.5C0.100502 5.7 0 5.8 0 6C0 6.2 0.100502 6.3 0.100502 6.4C0.100502 6.5 0.201005 6.6 0.301508 6.7L5.32663 11.7C5.52764 11.9 5.82915 12 6.03015 12C6.23116 12 6.53266 11.9 6.73367 11.7C7.13568 11.3 7.13568 10.7 6.73367 10.3L3.41709 7H18.794C19.4975 7 20 6.6 20 6C20 5.4 19.4975 5 18.8945 5Z"
                              fill="white"/>
                    </svg>
                    Retour
                </a>
                <div>
                    <ng-container *ngIf="($type | async) === 'characterWithNav'">
                        <a [routerLink]="'/personnages/' + character._id + '/details'" class="text-16 hover:underline">Modifier</a>
                        <span class="text-14 px-[6px] py-[3px] bg-light-dark rounded-[6px] ms-[10px]"
                              [ngClass]="(($character | characterToReamingXp | async) || 0) >= 0 ? 'text-blue' : 'text-orange'">
                          {{(($character | characterToReamingXp | async) || 0) >= 0 ? '↑' : '↓'}} {{Math.abs(($character | characterToReamingXp | async) || 0)}}
                            EXP
                        </span>
                    </ng-container>
                </div>
            </div>
        </div>
        <div *ngIf="($type | async) === 'characterWithNav'"
             class="w-full bg-cover bg-[url('assets/images/backgrounds/character-nav-bg.png')] h-full px-[15px]">
            <div class="container w-full mx-auto h-[45px] flex flex-row items-center overflow-x-scroll scrollbar:hidden whitespace-nowrap space-x-[4px]">
                <!--TODO: REVIEW ASSETS AND BGs-->
                <a [routerLink]="'/personnages/' + character._id" [routerLinkActiveOptions]="{exact: true}"
                   routerLinkActive="box-border px-[12px] border border-pink text-pink bg-black rounded-[8px] cursor-default hover:no-underline"
                   class="px-[13px] py-[6px] hover:underline">
                    Fiche
                </a>
                <a [routerLink]="'/personnages/' + character._id + '/lignee'"
                   routerLinkActive="box-border px-[12px] border border-pink text-pink bg-black rounded-[8px] cursor-default hover:no-underline"
                   class="px-[13px] py-[6px] hover:underline">
                    Lignée
                </a>
                <!--<a [routerLink]="'/personnages/' + character._id + '/arcs'"
                   routerLinkActive="box-border px-[12px] border border-pink text-pink bg-black rounded-[8px] cursor-default hover:no-underline"
                   class="px-[13px] py-[6px] hover:underline">
                    Arcs narratifs
                </a>
                <a [routerLink]="'/personnages/' + character._id + '/jutsus'"
                   routerLinkActive="box-border px-[12px] border border-pink text-pink bg-black rounded-[8px] cursor-default hover:no-underline"
                   class="px-[13px] py-[6px] hover:underline">
                    Jutsus & techniques
                </a>
                <a [routerLink]="'/personnages/' + character._id + '/equipement'"
                   routerLinkActive="box-border px-[12px] border border-pink text-pink bg-black rounded-[8px] cursor-default hover:no-underline"
                   class="px-[13px] py-[6px] hover:underline">
                    Équipements
                </a>-->
            </div>
        </div>
    </div>
</ng-template>